<?php
$json_language=<<<_END
{
"admin_change_settings_successfull":{
        "en":"Global wallet settings changed",
        "ru":"Глобальные настройки кошелька изменены",
        "fr":"Paramètres généraux du portefeuille modifiés",
        "de":"Globale Wallet Einstellungen geändert"
        },
"register_failed_password_mismatch":{
        "en":"Registration failed. Password mismatch.",
        "ru":"Ошибка при регистрациии: пароли не совпадают.",
        "fr":"Echec de l'inscription. Mots de passe non-concordant.",
        "de":"Registrierung fehlgeschlagen. Passwörter stimmen nicht überrein."
        },
"register_failed_invalid_password":{
        "en":"Registration failed. Invalid password.",
        "ru":"Ошибка при регистрации: неправильный пароль.",
        "fr":"Echec de l'inscription. Mot de passe invalide.",
        "de":"Registrierung fehlgeschlagen. Ungültiges Passwort."
        },
"register_failed_invalid_login":{
        "en":"Registration failed. Invalid login.",
        "ru":"Ошибка при регистрации: неправильный логин.",
        "fr":"Echec de l'inscription. Login invalide.",
        "de":"Registrierung fehlgeschlagen. Ungültiges Login."
        },
"register_failed_invalid_captcha":{
        "en":"Registration failed. Invalid captcha.",
        "ru":"Ошибка при регистрации: неправильная каптча.",
        "fr":"Echec de l'inscription. Captcha invalide.",
        "de":"Registrierung fehlgeschlagen. Ungülties Captcha."
        },
"register_failed_disabled":{
        "en":"Registration failed. Registration/login disabled.",
        "ru":"Ошибка при регистрации: регистрация и вход на ресурсе отключены.",
        "fr":"Echec de l'inscription. Inscription/Login désactivés.",
        "de":"Registrierung fehlgeschlagen. Registrierung/Login deaktiviert."
        },
"register_successfull":{
        "en":"Registration successful.",
        "ru":"Регистрация прошла успешно.",
        "fr":"Inscrpition réussie.",
        "de":"Registrierung erfolgreich."
        },
"login_successfull":{
        "en":"",
        "ru":"",
        "fr":"",
        "de":""
        },
"login_failed_invalid_login":{
        "en":"Login failed. Invalid login/password",
        "ru":"Ошибка при входе: неправильный логин или пароль.",
        "fr":"Echec du login. Login/mot de passe invalide.",
        "de":"Login fehlgeschlagen. Ungültiges Login / Passwort."
        },
"login_failed_invalid_password":{
        "en":"Login failed. Invalid login/password",
        "ru":"Ошибка при входе: неправильный логин или пароль.",
        "fr":"Echec du login. Login/mot de passe invalide.",
        "de":"Login fehlgeschlagen. Ungültiges Login / Passwort."
        },
"login_failed_invalid_captcha":{
        "en":"Login failed. Invalid captcha.",
        "ru":"Ошибка при входе: неправильная каптча.",
        "fr":"Echec du login. Captcha invalide.",
        "de":"Login fehlgeschlagen. Ungültiges Captcha."
        },
"login_failed_disabled":{
        "en":"Login failed. Registration/login disabled.",
        "ru":"Ошибка при входе: регистрация и вход на ресурсе отключены.",
        "fr":"Echec du login. Inscription/login désactivés.",
        "de":"Login fehlgeschlagen. Registrierung/Login deaktiviert."
        },
"user_change_settings_failed_new_password_mismatch":{
        "en":"Change settings failed. New password mismatch.",
        "ru":"Ошибка при изменении настроек: пароли не совпадают.",
        "fr":"Modification de paramètres échouée. Nouveau mot de passe non-concordant.",
        "de":"Ändern der Einstellungen fehlgeschlagen. Die neuen Passwörter stimmen nicht überein"
        },
"user_change_settings_failed_password_incorrect":{
        "en":"Change settings failed. Password incorrect.",
        "ru":"Ошибка при изменении настроек: неправильный пароль.",
        "fr":"Modification de paramètres échouée. Mot de passe incorrect.",
        "de":"Ändern der Einstellungen fehlgeschlagen. Ungültiges Passwort."
        },
"user_change_settings_successfull":{
        "en":"Settings successfully changed",
        "ru":"Настройки успешно изменены",
        "fr":"Modification de paramètres réussie.",
        "de":"Einstellungen erfolgreich geändert"
        },
"header_greeting":{
        "en":"Welcome,",
        "ru":"Вы вошли как",
        "fr":"Bienvenu,",
        "de":"Willkommen"
        },
"logout_successfull":{
        "en":"",
        "ru":"",
        "fr":"",
        "de":""
        },
"alias_deleted":{
        "en":"Address book entry deleted",
        "ru":"Удалена запись из адресной книги",
        "fr":"Entrée supprimée du répertoire d'adresse.",
        "de":"Addressbuch Eintrag gelöscht"
        },
"alias_changed":{
        "en":"Address book entry changed",
        "ru":"Запись в адресной книге изменена",
        "fr":"Entrée du repertoire d'adresse modifiée",
        "de":"Addressbuch Eintrag geändert."
        },
"send_failed":{
        "en":"Sending failed",
        "ru":"Ошибка при отправке",
        "fr":"Echec de l'envoi",
        "de":"Senden fehlgeschlagen."
        },
"send_successfull":{
        "en":"Sending successful",
        "ru":"Успешно отправлено",
        "fr":"Envoi réussi",
        "de":"Senden erfolgreich"
        },
"create_new_address_failed":{
        "en":"Creating new address failed",
        "ru":"Ошибка при создании нового адреса",
        "fr":"Création de nouvelle adresse échouée",
        "de":"Neue Adresse erfolgreich erstellt"
        },
"create_new_address_successfull":{
        "en":"New address requested",
        "ru":"Новый адрес запрошен",
        "fr":"Nouvelle adresse nécessaire",
        "de":"Neue Adresse angefordert"
        },
"footer_about":{
        "en":"Opensource gridcoin online wallet (<a href='https://github.com/sau412/gridcoin_online_wallet'>github link</a>) by Vladimir Tsarev, my nickname is sau412 on telegram, twitter, facebook, gmail, github, vk.",
        "ru":"Он-лайн кошелёк Gridcoin с открытым исходным кодом (<a href='https://github.com/sau412/gridcoin_online_wallet'>github</a>). Автор - Царев Владимир, мой ник sau412 в контакте, телеграме, твиттере, фейсбуке, gmail, github.",
        "fr":"Portefeuille Gridcoin opensource en ligne (<a href='https://github.com/sau412/gridcoin_online_wallet'>github link</a>) par Vladimir Tsarev, mon pseudo est sau42 sur telegram, twitter, facebook, gmail, github, vk.",
        "de":"Opensource Gridcoin online wallet (<a href='https://github.com/sau412/gridcoin_online_wallet'>github link</a>) von Vladimir Tsarev, mein Benutzername ist sau412 bei Telegram, Twitter, Facebook, Gmail, Github, vk."
        },
"login_login":{
        "en":"Login:",
        "ru":"Логин:",
        "fr":"Login:",
        "de":"Login:"
        },
"login_password":{
        "en":"Password:",
        "ru":"Пароль:",
        "fr":"Mot de passe:",
        "de":"Passwort:"
        },
"login_submit":{
        "en":"Login",
        "ru":"Вход",
        "fr":"Login",
        "de":"Login"
        },
"new_address_submit":{
        "en":"Request new receiving address",
        "ru":"Запросить новый адрес",
        "fr":"Demande de nouvelle adresse de réception",
        "de":"Neue Empfang-Adresse anfordern."
        },
"register_login":{
        "en":"Login:",
        "ru":"Логин:",
        "fr":"Login:",
        "de":"Login:"
        },
"register_mail":{
        "en":"E-mail:",
        "ru":"E-mail:",
        "fr":"E-mail:",
        "de":"E-mail:"
        },
"register_password1":{
        "en":"Password 1:",
        "ru":"Пароль 1:",
        "fr":"Mot de passe 1:",
        "de":"Passwort 1:"
        },
"register_password2":{
        "en":"Password 2:",
        "ru":"Пароль 2:",
        "fr":"Mot de passe 2:",
        "de":"Passwort 2:"
        },
"register_withdraw":{
        "en":"Withdraw address:",
        "ru":"Адрес для вывода:",
        "fr":"Adresse de retrait:",
        "de":"Withdraw Adresse:"
        },
"register_submit":{
        "en":"Register",
        "ru":"Регистрация",
        "fr":"Inscription",
        "de":"Register"
        },
"tab_info":{
        "en":"Info",
        "ru":"Информация",
        "fr":"Information",
        "de":"Information"
        },
"tab_dashboard":{
        "en":"Dashboard",
        "ru":"Основное",
        "fr":"Tableau de bord",
        "de":"Dashboard"
        },
"tab_send":{
        "en":"Send",
        "ru":"Отправка",
        "fr":"Envoyer",
        "de":"Senden"
        },
"tab_receive":{
        "en":"Receive",
        "ru":"Получение",
        "fr":"Recevoir",
        "de":"Empfangen"
        },
"tab_transactions":{
        "en":"Transactions",
        "ru":"Транзкции",
        "fr":"Transactions",
        "de":"Transaktionen"
        },
"tab_address_book":{
        "en":"Address book",
        "ru":"Адресная книга",
        "fr":"Répertoire d'adresses",
        "de":"Adressbuch"
        },
"tab_settings":{
        "en":"Settings",
        "ru":"Настройки",
        "fr":"Paramètres",
        "de":"Einstellungen"
        },
"tab_control":{
        "en":"Control",
        "ru":"Управление",
        "fr":"Contrôle",
        "de":"Control"
        },
"tab_log":{
        "en":"Log",
        "ru":"Лог",
        "fr":"Log",
        "de":"Log"
        },
"tab_login":{
        "en":"Login",
        "ru":"Вход",
        "fr":"Login",
        "de":"Login"
        },
"tab_register":{
        "en":"Register",
        "ru":"Регистрация",
        "fr":"Inscription",
        "de":"Registrierung"
        },
"dashboard_balance":{
        "en":"Balance:",
        "ru":"Баланс:",
        "fr":"Solde:",
        "de":"Kontostand"
        },
"send_address":{
        "en":"Address:",
        "ru":"Адрес:",
        "fr":"Adresse:",
        "de":"Adresse:"
        },
"send_amount":{
        "en":"Amount:",
        "ru":"Количество:",
        "fr":"Montant:",
        "de":"Betrag:"
        },
"send_submit":{
        "en":"Send",
        "ru":"Отправить",
        "fr":"Envoyer",
        "de":"Senden"
        },
"address_book_header":{
        "en":"Address book",
        "ru":"Адресная книга",
        "fr":"Répertoire d'adresse",
        "de":"Adressbuch"
        },
"address_book_label":{
        "en":"Label:",
        "ru":"Название:",
        "fr":"Note:",
        "de":"Label"
        },
"address_book_address":{
        "en":"address:",
        "ru":"адрес:",
        "fr":"adresse:",
        "de":"Adresse:"
        },
"address_book_submit":{
        "en":"Add",
        "ru":"Добавить",
        "fr":"Ajouter",
        "de":"Hinzufügen"
        },
"address_book_table_header_label":{
        "en":"Label",
        "ru":"Название",
        "fr":"Note",
        "de":"Label"
        },
"address_book_table_header_address":{
        "en":"Address",
        "ru":"Адрес",
        "fr":"Adresse",
        "de":"Adresse"
        },
"receive_header":{
        "en":"Receiving addresses",
        "ru":"Адреса для получения",
        "fr":"Adresses de réception",
        "de":"Empfangs-Adressen"
        },
"receive_generating":{
        "en":"generating...",
        "ru":"генерация...",
        "fr":"en cours de génération...",
        "de":"generiere..."
        },
"receive_table_header_address":{
        "en":"Address",
        "ru":"Адрес",
        "fr":"Adresse",
        "de":"Adresse"
        },
"receive_table_header_received":{
        "en":"Received,",
        "ru":"Получено,",
        "fr":"Reçu,",
        "de":"Empfangen,"
        },
"transactions_header":{
        "en":"Transactions",
        "ru":"Транзакции",
        "fr":"Transactions",
        "de":"Transaktionen"
        },
"transactions_table_header_address":{
        "en":"Address",
        "ru":"Адрес",
        "fr":"Adresse",
        "de":"Adresse"
        },
"transactions_table_header_amount":{
        "en":"Amount,",
        "ru":"Количество,",
        "fr":"Montant,",
        "de":"Betrag"
        },
"transactions_table_header_status":{
        "en":"Status",
        "ru":"Состояние",
        "fr":"Statut",
        "de":"Status"
        },
"transactions_table_header_tx_id":{
        "en":"TX ID",
        "ru":"TX ID",
        "fr":"TX_ID",
        "de":"TX_ID"
        },
"transactions_table_header_timestamp":{
        "en":"Timestamp",
        "ru":"Время",
        "fr":"Horodatage",
        "de":"Timestamp"
        },
"transactions_table_status_sent":{
        "en":"sent",
        "ru":"отправлено",
        "fr":"envoyé",
        "de":"gesendet"
        },
"transactions_table_status_received":{
        "en":"received",
        "ru":"получено",
        "fr":"reçu",
        "de":"empfangen"
        },
"transactions_table_status_processing":{
        "en":"processing",
        "ru":"обработка",
        "fr":"processus en cours",
        "de":"In Bearbeitung"
        },
"transactions_table_status_pending":{
        "en":"pending",
        "ru":"подтверждается",
        "fr":"en attente",
        "de":"ausstehend"
        },
"transactions_table_status_sending_error":{
        "en":"sending error",
        "ru":"ошибка при отправке",
        "fr":"erreur à l'envoi",
        "de":"Fehler beim Senden"
        },
"transactions_table_status_address_error":{
        "en":"address error",
        "ru":"ошибка в адресе",
        "fr":"erreur d'adresse",
        "de":"Adress Fehler"
        },
"client_state_header":{
        "en":"Client state:",
        "ru":"Состояние клиента:",
        "fr":"Statut du client:",
        "de":"Client Status"
        },
"client_state_current_block":{
        "en":"Current block:",
        "ru":"Текущий блок:",
        "fr":"Bloc en cours:",
        "de":"Aktueller Block:"
        },
"client_state_current_block_hash":{
        "en":"Hash:",
        "ru":"Хэш:",
        "fr":"Hash:",
        "de":"Hash:"
        },
"client_state_payouts":{
        "en":"Payouts:",
        "ru":"Выплаты:",
        "fr":"Paiements:",
        "de":"Auszahlungen"
        },
"client_state_api":{
        "en":"API:",
        "ru":"API:",
        "fr":"API",
        "de":"API"
        },
"client_state_client_state":{
        "en":"Client state:",
        "ru":"Состояние клиента:",
        "fr":"Statut du client:",
        "de":"Client status:"
        },
"client_state_enabled":{
        "en":"enabled",
        "ru":"разрешено",
        "fr":"activé",
        "de":"aktiviert"
        },
"client_state_disabled":{
        "en":"disabled",
        "ru":"запрещено",
        "fr":"désactivé",
        "de":"deaktiviert"
        },
"client_state_on":{
        "en":"on",
        "ru":"включено",
        "fr":"actif",
        "de":"aktiv"
        },
"client_state_off":{
        "en":"off",
        "ru":"выключено",
        "fr":"inactif",
        "de":"inaktiv"
        },
"client_state_hour":{
        "en":"h",
        "ru":"ч",
        "fr":"h",
        "de":"H"
        },
"client_state_minute":{
        "en":"min",
        "ru":"мин",
        "fr":"min",
        "de":"Min"
        },
"settings_header":{
        "en":"Settings",
        "ru":"Настройки",
        "fr":"Paramètres",
        "de":"Einstellungen"
        },
"settings_mail":{
        "en":"E-mail:",
        "ru":"E-mail:",
        "fr":"E-mail:",
        "de":"E-Mail"
        },
"settings_notifications":{
        "en":"notifications state",
        "ru":"состояние оповещений",
        "fr":"Statut des notifications",
        "de":"Benachrichtigungs-Status"
        },
"settings_enabled":{
        "en":"enabled",
        "ru":"включено",
        "fr":"activé",
        "de":"aktiv"
        },
"settings_disabled":{
        "en":"disabled",
        "ru":"выключено",
        "fr":"désactivé",
        "de":"deaktiviert"
        },
"settings_api_state":{
        "en":"API state:",
        "ru":"состояние API:",
        "fr":"statut API:",
        "de":"API status:"
        },
"settings_yes":{
        "en":"yes",
        "ru":"да",
        "fr":"oui",
        "de":"ja"
        },
"settings_no":{
        "en":"no",
        "ru":"нет",
        "fr":"non",
        "de":"nein"
        },
"settings_regenerate_api_key":{
        "en":"regenerate API key",
        "ru":"пересоздать ключ API",
        "fr":"regénérer la clé API",
        "de":"API-Schlüssel neugenerieren"
        },
"settings_api_key":{
        "en":"API key:",
        "ru":"ключ API:",
        "fr":"clé API:",
        "de":"API-Schlüssel"
        },
"settings_withdraw_address":{
        "en":"Withdraw address:",
        "ru":"Адрес для вывода:",
        "fr":"Adresse de retrait:",
        "de":"Withdraw Adresse:"
        },
"settings_password":{
        "en":"Password (required to change settings):",
        "ru":"Пароль (необходим для смены настроек):",
        "fr":"Mot de passe (nécessaire pour modifier les paramètres):",
        "de":"Passwort (wird benötigt um Einstellungen zu ändern):"
        },
"settings_new_password1":{
        "en":"New password (if you want to change password):",
        "ru":"Новы пароль (если вы хотите сменить ваш пароль):",
        "fr":"Nouveau mot de passe (si vous voulez changer de mot de passe):",
        "de":"Neues Passwort (falls Sie das Passwort ändern möchten)"
        },
"settings_new_password2":{
        "en":"New password one more time:",
        "ru":"Новый пароль ещё раз:",
        "fr":"Nouveau mot de passe à nouveau:",
        "de":"Neues Passwort noch einmal eingeben:"
        },
"settings_submit":{
        "en":"Apply",
        "ru":"Применить",
        "fr":"Appliquer",
        "de":"Anwenden"
        },
"log_header":{
        "en":"Log",
        "ru":"Лог",
        "fr":"Log",
        "de":"Log"
        },
"log_table_header_timestamp":{
        "en":"Timestamp",
        "ru":"Время",
        "fr":"Horodatage",
        "de":"Timestamp"
        },
"log_table_header_message":{
        "en":"Message",
        "ru":"Сообщение",
        "fr":"Message",
        "de":"Nachrichten"
        },
"info_header":{
        "en":"Info",
        "ru":"Информация",
        "fr":"Information",
        "de":"Information"
        },
"loading_block":{
        "en":"Loading block...",
        "ru":"Загрузка блока...",
        "fr":"Chargement des blocs...",
        "de":"Lade Block..."
        },
"link_block_explorer":{
        "en":"block explorer",
        "ru":"обозреватель блоков",
        "fr":"explorateur de blocs",
        "de":"Block Explorer"
        },
"link_send_to":{
        "en":"send to",
        "ru":"отправить",
        "fr":"envoyer à",
        "de":"Senden an"
        },
"link_address_book":{
        "en":"address book",
        "ru":"Адресная книга",
        "fr":"repertoire d'adresse",
        "de":"Adressbuch"
        },
"wallet_settings_header":{
        "en":"Wallet settings",
        "ru":"Настройки кошелька",
        "fr":"Paramètres du portefeuille",
        "de":"Wallet Einstellungen"
        },
"wallet_settings_enabled":{
        "en":"enabled",
        "ru":"включено",
        "fr":"activé",
        "de":"aktiviert"
        },
"wallet_settings_disabled":{
        "en":"disabled",
        "ru":"выключено",
        "fr":"désactivé",
        "de":"deaktiviert"
        },
"wallet_settings_login_state":{
        "en":"Login/register state:",
        "ru":"Состояние входа и регистрации:",
        "fr":"Statut du login/mot de passe:",
        "de":"Login/Registrierungs Status:"
        },
"wallet_settings_payouts_state":{
        "en":"payouts state:",
        "ru":"состояние выплат:",
        "fr":"statut des paiements:",
        "de":"Auszahlungsstatus:"
        },
"wallet_settings_api_state":{
        "en":"API state:",
        "ru":"состояние API:",
        "fr":"statut de l'API:",
        "de":"API-Status:"
        },
"wallet_settings_global_message":{
        "en":"Global message:",
        "ru":"Глобальное сообщение:",
        "fr":"Message global:",
        "de":"Globale Nachricht:"
        },
"wallet_settings_info":{
        "en":"Info block:",
        "ru":"Информационный блок:",
        "fr":"Info bloc:",
        "de":"Block Info:"
        },
"wallet_settings_submit":{
        "en":"Apply",
        "ru":"Применить",
        "fr":"Appliquer",
        "de":"Anwenden"
        }
}

_END;

function lang_load($lang_code) {
        global $json_language;
        global $default_language;
        if($lang_code=='') $lang_code=$default_language;
        $json_language_parsed=json_decode($json_language);
        $current_language=array();
        foreach($json_language_parsed as $key=>$lang_variable) {
                if(property_exists($lang_variable,$lang_code))
                        $current_language[$key]=$lang_variable->$lang_code;
        }
        return $current_language;
}
function lang_message($code) {
        global $current_language;
        if(isset($current_language[$code])) {
                return $current_language[$code];
        }
        return $code;
}

function lang_select_form($token) {
        return <<<_END
<form name=change_language method=post class='lang_selector'>
<input type=hidden name=action value='change_lang'>
<input type=hidden name=token value='$token'>
<select name=lang onChange='form.submit();'>
<option>language</option>
<option value='en'>English</option>
<option value='ru'>Русский</option>
<option value='fr'>En français</option>
<option value='de'>Auf Deutsch</option>
</select>
</form>

_END;
}

function lang_parser($text) {
        while(preg_match('/%([A-Za-z0-9_]+)%/',$text,$matches)) {
                $replace_from=$matches[0];
                $replace_to=lang_message($matches[1]);
                //echo "Replacing from '$replace_from' to '$replace_to'<br>";
                $text=str_replace($replace_from,$replace_to,$text);
        }
        return $text;
}
?>
